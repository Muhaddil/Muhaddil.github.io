let currentLang=localStorage.getItem("lang")||"es",translations={};async function loadTranslations(t){try{translations=await(await fetch(`locales/${t}.json`)).json(),updateTranslations(),updateActiveLangButton(t),document.documentElement.lang=t,typeof loadDocs=="function"&&window.location.pathname.includes("docs.html")&&loadDocs()}catch(e){console.error("Error loading translations:",e)}}window.updateTranslations=function(){document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");if(Object.keys(translations).length===0)return;const n=getNestedTranslation(translations,e);n&&(t.tagName==="INPUT"&&t.hasAttribute("placeholder")?t.placeholder=n:t.textContent=n)})};function getNestedTranslation(t,e){return!t||!e?null:e.split(".").reduce((n,a)=>n?n[a]:null,t)}function setLanguage(t){currentLang!==t&&(currentLang=t,localStorage.setItem("lang",t),loadTranslations(t),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{lang:t}})))}function updateActiveLangButton(t){document.querySelectorAll(".lang-btn").forEach(e=>{e.dataset.lang===t?e.classList.add("active"):e.classList.remove("active")})}document.addEventListener("DOMContentLoaded",()=>{loadTranslations(currentLang),document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",()=>{setLanguage(t.dataset.lang)})})}),window.i18n={t(t){return!translations||Object.keys(translations).length===0?t:t.split(".").reduce((e,n)=>e?.[n],translations)??t},get lang(){return currentLang}};
